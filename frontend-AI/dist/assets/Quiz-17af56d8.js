import{_ as A,r as u,c as F,a as I,o as a,b as V,w as h,d as e,e as y,f as r,F as w,g as x,h as B,t as _,n as D,i as S,v as U}from"./index-e0e7d705.js";import{u as M,_ as N}from"./AIresponse-92e00b7d.js";import{_ as R}from"./Upload-3ff245ae.js";const T={class:"p-6"},E={key:0},$={key:0},j={class:"text-lg font-semibold text-navy"},L={class:"space-y-2"},Y=["name","value","onUpdate:modelValue"],G=["disabled"],H={key:1,class:""},J={class:"my-4 p-2 text-center border border-navy rounded"},K={class:"font-semibold text-lg text-green-700"},O={class:"py-6"},P={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},W={class:"bg-light-gray overflow-hidden shadow-sm sm:rounded-lg border"},X={class:"p-10 text-navy-soft"},Z={class:"mb-6"},ee=1,se={__name:"Quiz",setup(te){const b=M(),o=u([]),p=u(!1),n=u([]),c=u(0),m=u(!1),d=u(null),g=t=>{var l,s;(s=(l=t==null?void 0:t.data)==null?void 0:l.response_data)!=null&&s.quiz&&(o.value=t.data.response_data.quiz,d.value=t.data.id,n.value=new Array(o.value.length).fill(null),p.value=!0)},z=()=>{p.value=!1,m.value=!1,n.value=new Array(o.value.length).fill(null),c.value=0,o.value=[],d.value=null},k=async()=>{c.value=o.value.reduce((s,v,i)=>n.value[i]==v.correct_answer?s+1:s,0);const t={correct_answers:o.value.map(s=>s.correct_answer),your_answers:n.value,total:c.value};m.value=!0,await D();const l={quiz_id:d.value,marks:t};if(d.value!=null)try{const s=await b.storeAnswers(l)}catch(s){console.error("Error storing quiz results:",s)}else console.error("Quiz ID is not available")},Q=F(()=>n.value.every(t=>t!=null));return(t,l)=>{const s=I("Modal");return a(),V(N,null,{header:h(()=>l[1]||(l[1]=[e("div",{class:"font-semibold text-2xl text-navy leading-tight bg-white w-full sm:w-1/2 md:w-1/4 p-4 sm:p-2 text-center rounded-md"}," AI Quiz Dashboard ",-1)])),default:h(()=>[y(s,{show:p.value},{default:h(()=>[e("div",T,[l[0]||(l[0]=e("h3",{class:"text-xl font-semibold text-navy pb-2"},"Quiz",-1)),m.value?(a(),r("div",H,[e("div",J,[e("p",K,"Your Score: "+_(c.value)+" / "+_(o.value.length),1)]),e("div",{class:"flex justify-center"},[e("button",{onClick:z,class:"mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-400 transition w-full"}," Close ")])])):(a(),r("div",E,[o.value.length?(a(),r("div",$,[(a(!0),r(w,null,x(o.value,(v,i)=>(a(),r("div",{key:i,class:"mb-4"},[e("h4",j,_(v.question),1),e("div",L,[(a(!0),r(w,null,x(v.options,(q,f)=>(a(),r("div",{key:f,class:"flex items-center"},[S(e("input",{type:"radio",name:"question-"+i,value:f,"onUpdate:modelValue":C=>n.value[i]=C,class:"mr-2"},null,8,Y),[[U,n.value[i]]]),e("label",null,_(q),1)]))),128))])]))),128))])):B("",!0),e("button",{onClick:k,disabled:!Q.value,class:"mt-4 px-4 py-2 bg-navy text-white rounded-lg hover:bg-navy-sky transition disabled:opacity-50"}," Finish Quiz ",8,G)]))])]),_:1},8,["show"]),e("div",O,[e("div",P,[e("div",W,[e("div",X,[e("div",Z,[y(R,{responseType:ee,onFileUploadSuccess:g})])])])])])]),_:1})}}},ne=A(se,[["__scopeId","data-v-f55264cd"]]);export{ne as default};
